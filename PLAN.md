# План разработки платформы тестирования по русскому языку

## Технический стек
- **Frontend**: Next.js 14+ (App Router)
- **React** + **TypeScript**
- **Styling**: CSS Modules / Tailwind CSS
- **State Management**: React Context / Zustand
- **Интеграции**: Битрикс24 API, ЮKassa API, Google Analytics, Яндекс.Метрика

## Этапы разработки

### Этап 1: Инициализация проекта (День 1)
- [x] Создание репозитория на GitHub
- [x] Инициализация Next.js проекта с TypeScript
- [ ] Настройка структуры папок
- [ ] Настройка ESLint, Prettier
- [ ] Базовая конфигурация проекта
- [ ] Настройка деплоя (Vercel)

### Этап 2: Базовая структура и типы (День 1-2)
- [ ] Создание TypeScript типов для:
  - Типы вопросов
  - Типы тестов
  - Типы ответов
  - Типы результатов
- [ ] Создание базовых компонентов:
  - Layout
  - Header
  - Footer
  - Navigation
- [ ] Настройка роутинга

### Этап 3: Сбор и подготовка данных тестов (День 2-3)
- [ ] Анализ официального сайта и спецификации
- [ ] Парсинг данных с https://inostr-exam.fipi.ru/xmodules/qprint/index.php
- [ ] Сбор вопросов для трех тестов:
  - Уровень 1: Разрешение на работу (патент)
  - Уровень 2: Разрешение на временное проживание в РФ
  - Уровень 3: Вид на жительство в РФ
- [ ] Выбор одного варианта каждого вопроса
- [ ] Форматирование данных в JSON
- [ ] Проверка соответствия официальной спецификации

### Этап 4: Компоненты типов вопросов (День 3-4)
- [ ] Компонент: Текстовый вопрос с текстовыми вариантами (выбрать один)
- [ ] Компонент: Текстовый вопрос с аудиозаписью и текстовыми вариантами
- [ ] Компонент: Текстовый вопрос с таблицей (вписать ответ)
- [ ] Компонент: Текстовый вопрос с вариантами из картинок (выбрать один)
- [ ] Базовый компонент вопроса с общими элементами

### Этап 5: Логика прохождения теста (День 4-5)
- [ ] Компонент страницы теста
- [ ] Навигация между вопросами
- [ ] Сохранение ответов пользователя
- [ ] Проверка обязательности ответов
- [ ] Прогресс-бар прохождения теста
- [ ] Сохранение состояния в localStorage

### Этап 6: Система результатов и оценки (День 5-6)
- [ ] Логика подсчета результатов
- [ ] Соответствие официальной спецификации оценки
- [ ] Компонент страницы результатов
- [ ] Отображение правильных/неправильных ответов
- [ ] Статистика по разделам

### Этап 7: A/B тестирование (День 6-7)
- [ ] Реализация логики распределения 50/50
- [ ] Механизм отключения A/B тестирования
- [ ] Показ результатов сразу (бесплатная группа)
- [ ] Показ результатов после оплаты (платная группа)
- [ ] Хранение состояния A/B теста в localStorage/cookies

### Этап 8: Интеграция Битрикс24 (День 7-8)
- [ ] Настройка вебхука для отправки лидов
- [ ] Компонент сбора контактных данных
- [ ] Реализация отправки данных после прохождения теста
- [ ] Обработка ошибок и retry-логика
- [ ] Тестирование интеграции

### Этап 9: Интеграция ЮKassa (День 8-9)
- [ ] Изучение документации ЮKassa
- [ ] Настройка API клиента
- [ ] Создание платежа
- [ ] Обработка успешной оплаты (webhook)
- [ ] Показ результатов после оплаты
- [ ] Тестирование платежной системы (тестовый режим)

### Этап 10: Интеграция аналитики (День 9-10)
- [ ] Настройка Google Analytics
- [ ] Настройка Яндекс.Метрика
- [ ] Событие: Отправка формы (любое прохождение теста)
- [ ] Событие: Отправка бесплатной формы
- [ ] Событие: Отправка платной формы
- [ ] Тестирование отправки событий

### Этап 11: Главная страница и верстка (День 10-11)
- [ ] Верстка главной страницы по макету Figma
- [ ] Адаптивная верстка
- [ ] Оптимизация изображений
- [ ] Верстка страниц тестов
- [ ] Верстка страницы результатов

### Этап 12: Финальное тестирование (День 11-12)
- [ ] Тестирование всех типов вопросов
- [ ] Тестирование всех трех тестов
- [ ] Тестирование A/B системы
- [ ] Тестирование интеграций:
  - Битрикс24
  - ЮKassa (тестовый и продакшн режим)
  - Аналитика
- [ ] Проверка соответствия спецификации
- [ ] Проверка адаптивности
- [ ] Проверка производительности

### Этап 13: Документация и деплой (День 12-13)
- [ ] Написание README с инструкциями
- [ ] Документация по настройке интеграций
- [ ] Финальная настройка деплоя
- [ ] Продакшн деплой на Vercel
